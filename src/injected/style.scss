@use '../metadata.scss' as *;

$small-width-breakpoint: 1000px;
$small-height-breakpoint: 900px;

$tiny-width-breakpoint: 500px;
$tiny-height-breakpoint: 400px;

$feature-color: #007acc;






##{$plugin_slug}_switch-focus-container {
  
   // PLACEMENT
   ////////////
   position: absolute;
   right: 0;
   bottom: 0;
   margin-right: 2%;
   margin-bottom: 30px;

   z-index: 3000;

   text-align: right;




   ##{$plugin_slug}_switch-focus-btn {

      // STYLING
      //////////
      color: #fff;
      background-color: #000;
      border-radius: 50%;

      // SIZING
      /////////
      display: inline-block;
      width: 100px;
      height: 100px;
      @media (max-width: $small-width-breakpoint), (max-height: $small-height-breakpoint) {
         // if it's below this width OR below this height
         width: 80px;
         height: 80px;
      }
      @media (max-width: $tiny-width-breakpoint), (max-height: $tiny-height-breakpoint) {
         // if it's below this width OR below this height
         width: 50px;
         height: 50px;
      }

      position: relative;

      i {
         font-size: 40px;
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translateX(-50%) translateY(-50%);
      }
   }



   ##{$plugin_slug}_setup-actions-btn {

      // start closed
      visibility: hidden;

      // STYLING
      //////////
      color: #fff;
      background-color: #000;
      border-radius: 50%;

      // SPACING
      margin-right: 5px;

      // SIZING
      /////////
      display: inline-block;
      width: 30px;
      height: 30px;
      @media (max-width: $small-width-breakpoint), (max-height: $small-height-breakpoint) {
         // if it's below this width OR below this height
         // width: 30px;
         // height: 30px;
      }
      @media (max-width: $tiny-width-breakpoint), (max-height: $tiny-height-breakpoint) {
         // if it's below this width OR below this height
         // width: 50px;
         // height: 50px;
      }

      position: relative;

      i {
         font-size: 20px;
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translateX(-50%) translateY(-50%);
      }
   }




   ##{$plugin_slug}_switch-header-btn {

      // start closed
      visibility: hidden;

      // STYLING
      //////////
      color: #fff;
      background-color: #000;
      border-radius: 50%;

      // SPACING
      margin-right: 10px;

      // SIZING
      /////////
      display: inline-block;
      width: 50px;
      height: 50px;
      @media (max-width: $small-width-breakpoint), (max-height: $small-height-breakpoint) {
         // if it's below this width OR below this height
         // width: 30px;
         // height: 30px;
      }
      @media (max-width: $tiny-width-breakpoint), (max-height: $tiny-height-breakpoint) {
         // if it's below this width OR below this height
         // width: 50px;
         // height: 50px;
      }

      position: relative;

      i {
         font-size: 25px;
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translateX(-50%) translateY(-50%);
      }
   }






   .#{$plugin_slug}_preset-container {

      margin: 1em 0;

      // start closed
      visibility: hidden;
      
      &:last-of-type {
         margin-bottom: 2em;
      }

      &.#{$plugin_slug}_active {

         a {
            color: #fff;
            background-color: $feature-color;
         }
         
      }

      &.#{$plugin_slug}_unsaved {
         opacity: 0.4;
      }


      a {
         color: inherit;
         text-decoration: none;

         color: #fff;
         background-color: #000;
         border-radius: 1em;

         padding: 0.3em 1em;
         margin-left: 3px;

         &:active {
            color: inherit;
            background-color: inherit;
         }
         &:hover {
            color: #000;
            background-color: #fff;
         }

      }

            
   }


   &.#{$plugin_slug}_open {

      ##{$plugin_slug}_setup-actions-btn,
      ##{$plugin_slug}_switch-header-btn,
      .#{$plugin_slug}_preset-container
      {
         visibility: visible;
      }

   }


  
}








.#{$plugin_slug}_trello-ui_collapse {
   display: none !important;
}

// when all headers are hidden
.#{$plugin_slug}_trello-ui_header-padding {
   padding-top: 10px;
}










/* TODO: create buttons to shrink and expand any list*/
/* TODO: create separate buttons to also show/hide: labels, users, and badges*/
/* TODO: button to hide image previews*/

/* TODO: Card cover height should be 0 and javascript should check if there is actually an image in there and increase it to 1px*/

/* absolutely position rollover preview of card image (left or right depending on where mouse is*/

/* All options should use browser memory to remember how you last left each one*/

/* TODO: create an upcoming filter as well as the done filter (like "goals", or "upcoming", or "potential")*/
/* can you tell it to search for multiple? - to help when one of your boards suits "goal" but another is better with "potential"*/

/* TODO: create global button to hide upcoming lists entirely*/
/* TODO: create global button to hide done lists entirely*/

/* TODO: ability to turn on progress bars for cards (collapse checklists or stack)*/

/* TODO: create an abanded/ditched filter*/

/* TODO: Animation that can be turned on and off (for transitions from normal states to custom and when custom switches are pressed, etc.*/

/* TODO: Shrink labels to 2 pixels in shrunken lists*/
/* TODO: Shrink label text too*/

/* Add class for shrunken lists so they can be styled together (across type)*/







/*/////////////////////*/
/* Affect List Buttons*/
.ft_list-btn-group {
   // position: absolute;
   // top: 0;
   // left: 0;
   // z-index: 10;
/*   padding-left: 4px;*/
}



.ft_pop-over-header-btn {
   color: #6b778c;
   padding: 10px 6px;
}
.ft_pop-over-header-btn.left-most {
   padding-left: 10px;
}












////////////
// LIST SIZE
////////////


      @mixin list-sizing-adjustments(
         $width: ignore,
         $font-size: ignore
      ) {
      
         width: #{$width} !important;

          // Shrink list title
         .js-list-name-input {
            font-size: #{$font-size};
            height: 1em;
         }
         // Shrink card titles
         .js-card-name {
            font-size: #{$font-size};
            line-height: 1.3em;
         }
         // Shrink card labels
         .js-card-labels {
            overflow: hidden;
            font-size: #{$font-size};
            .card-label { font-size: inherit }
         }
         // Shrink card badges and due dates
         .badge-text {
            overflow: hidden;
            font-size: #{$font-size};
         }
         // Shrink add new card input
         .js-open-card-composer {
            font-size: #{$font-size};
         }
         .card-composer {
            font-size: #{$font-size};
            * { font-size: inherit; }
         }

      }




      // Narrow
      /////////
      .ft_list-size_narrow {
         @include list-sizing-adjustments(
            $width: 150px,
            $font-size: 0.7em
         );
      }


      // Wide 1
      /////////
      .ft_list-size_wide-1 {
         @include list-sizing-adjustments(
            $width: 500px,
         );

         // TO DO: Should this be incorporated in the mixin?
         .list-card {
            display: inline-block;
            margin-left: 10px;
            &:first-of-type { margin-left: 0; }
         }
         
      }

      // Wide 2
      /////////
      .ft_list-size_wide-2 {
         @include list-sizing-adjustments(
            $width: 1000px,
         );

         .list-card {
            display: inline-block;
            margin-left: 10px;
            &:first-of-type { margin-left: 0; }
         }
      }

      // Wide 3
      /////////
      .ft_list-size_wide-3 {
         @include list-sizing-adjustments(
            $width: 1500px,
         );

         .list-card {
            display: inline-block;
            margin-left: 10px;
            &:first-of-type { margin-left: 0; }
         }
      }



//////////////
// LIST COLORS
//////////////



      @mixin list-color-adjustments(
         $card-fg-color: ignore,
         $card-bg-color: ignore,
         $list-fg-color: ignore,
         $list-bg-color: ignore,
         $card-opacity: ignore,
         $list-is-transparent: false
      ) {

         .js-list-content {
            background-color: #{$list-bg-color};
            @if $list-is-transparent { background: none; }

            .js-list-header {
               color: #{$list-fg-color};
               .js-list-name-input:not(.is-editing) { color: inherit !important; }
               .list-header-extras {
                  color: inherit !important;
                  * { color: inherit !important; }
               }
            }

            .list-card {
               opacity: #{$card-opacity};
               background-color: #{$card-bg-color};
   
               .js-card-name {
                  color: #{$card-fg-color};
               }
               .js-badges {
                  color: #{$card-fg-color};
                  * { color: inherit !important; }
                  .js-due-date-badge { background-color: unset }
               }
            }
            
            .card-composer {
               .js-composer {
                  color: #{$card-fg-color};
                  background-color: #{$card-bg-color};
               }
               .cc-controls {
                  color: #{$list-fg-color};
                  .js-cancel { color: inherit !important; }
                  .js-cc-menu { color: inherit !important; }
               }
            }
            .card-composer-container {
               color: #{$list-fg-color};
               * { color: inherit !important; }
            }

         }
         
      }




      // .ft_list-color_subtle {
      //    @include list-color-adjustments()
      // }

      // .ft_list-color_subtle-and-clear {

      //    @include list-color-adjustments(
      //          $list-is-transparent: true,
      //          $card-opacity: 0.4,
      //    )

      // }
      
      .ft_list-color_dark {
         @include list-color-adjustments(
            $card-fg-color: #ccc,
            $card-bg-color: rgba(255, 255, 255, 0.1),
            $list-fg-color: #ddd,
            $list-bg-color: rgba(70, 70, 70, 0.9),
         )
      }

      
      .ft_list-color_dark-and-clear {
         @include list-color-adjustments(
               $card-fg-color: #ccc,
               $card-bg-color: rgb(1, 1, 1, 0.3),
               $list-fg-color: #ddd,
               $list-is-transparent: true,
               // $card-opacity: 0.4,
         )
      }

      .ft_list-color_default-and-clear {
         @include list-color-adjustments(
               $card-fg-color: #000,
               $card-bg-color: rgb(255, 255, 255, 0.4),
               $list-fg-color: #ddd,
               $list-is-transparent: true,
               // $card-opacity: 0.4,
         )
      }








////////////////////////
// CARD LABEL APPEARANCE
////////////////////////


      .ft_card-labels_hidden {
         .js-card-labels { display: none; }
      }




/////////////////////////////////////
// CARD BADGES & DUE DATES APPEARANCE
/////////////////////////////////////
// Badges and due dates are grouped together because they sit in the same row, therefore, removing only some doesn't make the card any smaller or feel less detailed

      .ft_card-badges_hidden {
         .badges { display: none; }
      }




//////////////////////////
// CARD DETAILS APPEARANCE
//////////////////////////
      
      .ft_card-details_hidden {
         .js-list-card-members { display: none; }
      } 




/////////////////////////
// CARD IMAGES APPEARANCE
/////////////////////////

      .ft_card-images_minimised {
         .list-card-cover.is-covered { // .is-covered seems to indicate it is showing an image. Including this means we don't increase the height of a card that wasn't showing an image anyway
            height: 3px !important;
         }
      }

      .ft_card-images_hidden {
         .list-card-cover {
            height: 0px !important;
         }
      }